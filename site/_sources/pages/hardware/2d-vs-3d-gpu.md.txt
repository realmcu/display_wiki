# 2D / 2.5D / 3D GPU 技术对比报告

## 摘要

本报告从芯片设计角度，对比分析嵌入式显示领域的三类图形处理器（2D GPU、2.5D GPU、3D GPU），重点分析其工作原理、硬件架构、总线需求、内存带宽、系统集成等关键设计要素，为 SoC 架构设计和 IP 选型提供技术参考。

---

## 1. 基础概念

### 1.1 三类 GPU 定位

| 类型 | 定位 | 典型 IP |
|-----|------|---------|
| **2D GPU** | 平面图形加速 | STM32 DMA2D, NXP PXP |
| **2.5D GPU** | 平面图形 + 变形 + 矢量 | Vivante GC320, Think Silicon Nema |
| **3D GPU** | 完整三维渲染 | ARM Mali, Vivante GC7000, PowerVR |

### 1.2 核心区别

| 对比项 | 2D GPU | 2.5D GPU | 3D GPU |
|-------|--------|----------|--------|
| **渲染管线** | 固定功能 | 半固定 | 可编程 |
| **光照计算** | 无 | 无 | 有 |
| **深度缓冲** | 无 | 有限 | 完整 |
| **着色器** | 无 | 无 | 有 |

---

## 2. 工作原理对比（芯片设计视角）

### 2.1 2D GPU 工作流程

```
┌─────────────────────────────────────────────────────────────┐
│                        2D GPU 架构                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   CPU ──→ 命令寄存器 ──→ 2D 引擎 ──→ 帧缓冲                │
│                            │                                │
│                         DMA 控制器                          │
│                            │                                │
│                      ┌─────┴─────┐                          │
│                      ↓           ↓                          │
│                   源地址      目标地址                       │
│                  (RAM)        (RAM)                         │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**工作方式**：
1. CPU 配置寄存器（源地址、目标地址、操作类型）
2. DMA 从源地址读取数据
3. 2D 引擎执行操作（BitBlt、Alpha 混合等）
4. DMA 写入目标地址
5. 完成后产生中断

**硬件特点**：
- 操作单位：矩形区域
- 数据流：线性读写
- 无需复杂调度

### 2.2 2.5D GPU 工作流程

```
┌─────────────────────────────────────────────────────────────┐
│                       2.5D GPU 架构                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   CPU ──→ 命令队列 ──→ 命令解析器                           │
│              │                                              │
│              ↓                                              │
│   ┌──────────────────────────────────────────┐              │
│   │              渲染管线                     │              │
│   │  ┌─────────┐  ┌─────────┐  ┌─────────┐  │              │
│   │  │ 顶点    │→ │ 纹理    │→ │ 混合    │  │              │
│   │  │ 变换    │  │ 采样    │  │ 输出    │  │              │
│   │  └─────────┘  └─────────┘  └─────────┘  │              │
│   └──────────────────────────────────────────┘              │
│         ↑              ↑              ↓                     │
│    顶点缓存       纹理缓存       帧缓冲                      │
│      (RAM)         (RAM)         (RAM)                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**工作方式**：
1. CPU 提交命令到命令队列（Command Buffer）
2. GPU 异步执行命令
3. 顶点变换：对顶点坐标进行矩阵变换（旋转、缩放、透视）
4. 纹理采样：从纹理缓存读取像素
5. 混合输出：Alpha 混合后写入帧缓冲
6. 支持矢量路径光栅化（OpenVG）

**硬件特点**：
- 操作单位：图元（三角形、路径）
- 数据流：随机读取（纹理采样）
- 需要命令队列管理

### 2.3 3D GPU 工作流程

```
┌─────────────────────────────────────────────────────────────┐
│                        3D GPU 架构                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   CPU ──→ 命令队列 ──→ 命令处理器                           │
│              │                                              │
│              ↓                                              │
│   ┌──────────────────────────────────────────────────────┐  │
│   │                    可编程渲染管线                     │  │
│   │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐ │  │
│   │  │ 顶点    │→ │ 图元    │→ │ 光栅化  │→ │ 片段    │ │  │
│   │  │ 着色器  │  │ 装配    │  │         │  │ 着色器  │ │  │
│   │  └─────────┘  └─────────┘  └─────────┘  └─────────┘ │  │
│   │       ↓                                      ↓       │  │
│   │  ┌─────────┐                            ┌─────────┐ │  │
│   │  │ 统一    │←─────────────────────────→ │ 纹理    │ │  │
│   │  │ 着色器  │                            │ 单元    │ │  │
│   │  │ 核心    │                            │         │ │  │
│   │  └─────────┘                            └─────────┘ │  │
│   └──────────────────────────────────────────────────────┘  │
│         ↑              ↑              ↑           ↓         │
│    顶点缓存       纹理缓存       深度缓存     帧缓冲         │
│      (RAM)         (RAM)         (RAM)       (RAM)          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**工作方式**：
1. CPU 提交绘制命令和着色器程序
2. 顶点着色器：可编程顶点处理（变换、光照预计算）
3. 图元装配：组装三角形
4. 光栅化：三角形转换为片段（像素候选）
5. 片段着色器：可编程像素处理（纹理、光照、材质）
6. 深度测试：Z-Buffer 遮挡剔除
7. 混合输出：写入帧缓冲

**硬件特点**：
- 操作单位：三角形 + 可编程着色器
- 数据流：高度随机（纹理、深度缓冲）
- 需要复杂的调度和缓存管理

---

## 3. 内存架构对比（关键设计要素）

### 3.1 内存带宽需求

以 **480×480 @ 60fps** 为例：

| 操作 | 2D GPU | 2.5D GPU | 3D GPU |
|-----|--------|----------|--------|
| **帧缓冲写入** | 27.6 MB/s | 27.6 MB/s | 27.6 MB/s |
| **源图像读取** | 27.6 MB/s | 55.3 MB/s | 55.3 MB/s |
| **纹理读取** | - | 55.3 MB/s | 110.6 MB/s |
| **深度缓冲读写** | - | - | 55.3 MB/s |
| **命令/顶点数据** | 0.5 MB/s | 2 MB/s | 10 MB/s |
| **总带宽需求** | **~60 MB/s** | **~150 MB/s** | **~300 MB/s** |
| **建议带宽余量** | 100 MB/s | 300 MB/s | 600 MB/s |

### 3.2 内存容量需求

| 缓冲区 | 2D GPU | 2.5D GPU | 3D GPU |
|-------|--------|----------|--------|
| **帧缓冲（双缓冲）** | 0.9 MB | 0.9 MB | 0.9 MB |
| **纹理缓存** | - | 1-4 MB | 4-16 MB |
| **深度缓冲** | - | - | 0.9 MB |
| **命令缓冲** | 4 KB | 64 KB | 256 KB |
| **顶点缓冲** | - | 64 KB | 1 MB |
| **着色器指令** | - | - | 64 KB |
| **总内存需求** | **~1 MB** | **~3-6 MB** | **~8-20 MB** |

### 3.3 内存访问模式

| 特性 | 2D GPU | 2.5D GPU | 3D GPU |
|-----|--------|----------|--------|
| **访问模式** | 线性/块状 | 线性 + 随机 | 高度随机 |
| **突发长度** | 长（64-256 字节） | 中（32-64 字节） | 短（16-32 字节） |
| **缓存命中率** | 高（>90%） | 中（70-85%） | 低（50-70%） |
| **延迟敏感度** | 低 | 中 | 高 |

---

## 4. 总线架构需求

### 4.1 总线接口对比

| 特性 | 2D GPU | 2.5D GPU | 3D GPU |
|-----|--------|----------|--------|
| **总线类型** | AHB/AXI | AXI | AXI |
| **数据位宽** | 32/64-bit | 64/128-bit | 128/256-bit |
| **Outstanding** | 2-4 | 4-8 | 8-16 |
| **QoS 支持** | 可选 | 建议 | 必需 |
| **MMU 支持** | 可选 | 建议 | 必需 |

### 4.2 典型总线配置

**2D GPU（低成本方案）**：
```
CPU ←──AHB──→ 2D GPU ←──AHB──→ SRAM/PSRAM
                                 (1-4 MB)
```

**2.5D GPU（中端方案）**：
```
                    ┌──────────────────┐
CPU ←──AXI64──→    │   AXI 互联       │ ←──AXI64──→ DDR Controller
                    │   (QoS 仲裁)     │              (DDR3-800)
2.5D GPU ←─AXI64──→ │                  │
                    └──────────────────┘
```

**3D GPU（高性能方案）**：
```
                    ┌──────────────────┐
CPU ←──AXI128──→   │   AXI 互联       │ ←──AXI128──→ DDR Controller
                    │   (QoS + MMU)    │               (DDR3-1600)
3D GPU ←─AXI128──→ │                  │
                    │                  │ ←──AXI64───→ Display Controller
                    └──────────────────┘
```

### 4.3 总线带宽分配建议

| 主设备 | 2D GPU 系统 | 2.5D GPU 系统 | 3D GPU 系统 |
|-------|-------------|---------------|-------------|
| **CPU** | 40% | 30% | 25% |
| **GPU** | 30% | 45% | 55% |
| **Display** | 20% | 20% | 15% |
| **其他** | 10% | 5% | 5% |

---

## 5. 硬件资源对比

### 5.1 芯片面积（28nm 工艺估算）

| 模块 | 2D GPU | 2.5D GPU | 3D GPU |
|-----|--------|----------|--------|
| **核心逻辑** | 0.1-0.3 mm² | 0.5-1.0 mm² | 1.5-4.0 mm² |
| **SRAM 缓存** | 8-32 KB | 32-128 KB | 128-512 KB |
| **寄存器文件** | 1 KB | 4 KB | 16-64 KB |
| **总面积** | **0.2-0.5 mm²** | **0.8-1.5 mm²** | **2.0-5.0 mm²** |

### 5.2 功耗估算（典型工作负载）

| 指标 | 2D GPU | 2.5D GPU | 3D GPU |
|-----|--------|----------|--------|
| **动态功耗** | 20-50 mW | 100-300 mW | 300-1000 mW |
| **静态功耗** | 1-5 mW | 5-20 mW | 20-100 mW |
| **峰值功耗** | 80 mW | 500 mW | 2000 mW |
| **能效比** | 20 Mpix/mW | 5 Mpix/mW | 2 Mpix/mW |

### 5.3 时钟域

| 时钟 | 2D GPU | 2.5D GPU | 3D GPU |
|-----|--------|----------|--------|
| **核心时钟** | 100-200 MHz | 200-400 MHz | 400-800 MHz |
| **总线时钟** | 与核心同步 | 独立/同步 | 独立 |
| **时钟门控** | 简单 | 中等 | 复杂 |
| **DVFS 支持** | 可选 | 建议 | 必需 |

---

## 6. 系统集成考量

### 6.1 IP 集成复杂度

| 集成项 | 2D GPU | 2.5D GPU | 3D GPU |
|-------|--------|----------|--------|
| **RTL 复杂度** | 低（10K 门） | 中（100K 门） | 高（500K-2M 门） |
| **验证周期** | 2-4 周 | 4-8 周 | 8-16 周 |
| **驱动开发** | 1-2 人月 | 2-4 人月 | 6-12 人月 |
| **功耗优化** | 简单 | 中等 | 复杂 |

### 6.2 软件栈对比

**2D GPU**：
```
应用程序
    ↓
HAL 驱动（寄存器操作）
    ↓
硬件
```

**2.5D GPU**：
```
应用程序
    ↓
OpenVG / 私有 API
    ↓
用户态驱动（命令生成）
    ↓
内核驱动（内存管理、调度）
    ↓
硬件
```

**3D GPU**：
```
应用程序
    ↓
OpenGL ES / Vulkan
    ↓
用户态驱动（着色器编译、命令生成）
    ↓
内核驱动（内存管理、调度、电源管理）
    ↓
硬件
```

### 6.3 中断和同步

| 特性 | 2D GPU | 2.5D GPU | 3D GPU |
|-----|--------|----------|--------|
| **中断类型** | 完成中断 | 完成 + 错误 | 完成 + 错误 + 页错误 |
| **同步机制** | 轮询/中断 | Fence | Fence + Semaphore |
| **超时处理** | 简单复位 | 上下文恢复 | 复杂恢复 |

---

## 7. 设计决策指南

### 7.1 选型决策树

```
开始
  │
  ▼
目标功耗 < 100mW？ ──是──→ 选择 2D GPU
  │
  否
  ▼
需要 3D 模型渲染？ ──是──→ 选择 3D GPU
  │
  否
  ▼
需要矢量图形/透视变换？ ──是──→ 选择 2.5D GPU
  │
  否
  ▼
选择 2D GPU
```

### 7.2 系统配置建议

| 应用场景 | GPU 类型 | 内存配置 | 总线配置 | 功耗预算 |
|---------|---------|---------|---------|---------|
| **IoT 显示** | 2D GPU | 2MB PSRAM | AHB-32 | < 50mW |
| **智能手表** | 2.5D GPU | 8MB PSRAM | AXI-64 | < 200mW |
| **车载仪表** | 2.5D GPU | 32MB DDR3 | AXI-64 | < 500mW |
| **车载中控** | 3D GPU | 256MB DDR3 | AXI-128 | < 2W |
| **游戏设备** | 3D GPU | 512MB DDR4 | AXI-256 | < 5W |

### 7.3 风险评估

| 风险项 | 2D GPU | 2.5D GPU | 3D GPU |
|-------|--------|----------|--------|
| **IP 授权成本** | 低 | 中 | 高 |
| **集成风险** | 低 | 中 | 高 |
| **驱动成熟度** | 高 | 中 | 依赖供应商 |
| **长期维护** | 简单 | 中等 | 复杂 |
| **供应商锁定** | 低 | 中 | 高 |

---

## 8. 典型 IP 对比

### 8.1 2.5D GPU IP

| IP 名称 | 供应商 | 性能 | 面积 | 特点 |
|--------|-------|------|------|------|
| **GC320** | Vivante | 1.0 Gpix/s | 0.8 mm² | OpenVG 1.1，成熟稳定 |
| **GC355** | Vivante | 1.5 Gpix/s | 1.0 mm² | 增强矢量性能 |
| **Nema|GPU** | Think Silicon | 1.2 Gpix/s | 0.6 mm² | 超低功耗 |
| **Dave2D** | Renesas | 1.0 Gpix/s | 0.5 mm² | 车规认证 |

### 8.2 3D GPU IP

| IP 名称 | 供应商 | 性能 | 面积 | 特点 |
|--------|-------|------|------|------|
| **Mali-G31** | ARM | 50M tri/s | 1.5 mm² | 生态最好 |
| **GC7000L** | Vivante | 100M tri/s | 2.5 mm² | 多显示支持 |
| **GE8300** | PowerVR | 30M tri/s | 1.2 mm² | TBDR 架构 |
| **GC7000UL** | Vivante | 180M tri/s | 3.5 mm² | 高性能 |

---

## 9. 总结

### 9.1 核心结论

| 维度 | 2D GPU | 2.5D GPU | 3D GPU |
|-----|--------|----------|--------|
| **内存带宽** | 低（~100 MB/s） | 中（~300 MB/s） | 高（~600 MB/s） |
| **内存容量** | 小（~1 MB） | 中（~4 MB） | 大（~16 MB） |
| **总线复杂度** | 简单（AHB） | 中等（AXI-64） | 复杂（AXI-128+） |
| **芯片面积** | 小（<0.5 mm²） | 中（~1 mm²） | 大（>2 mm²） |
| **功耗** | 低（<50 mW） | 中（<300 mW） | 高（<1000 mW） |
| **集成难度** | 简单 | 中等 | 复杂 |

### 9.2 设计建议

1. **成本敏感型产品**：选择 2D GPU，搭配 PSRAM，AHB 总线
2. **中端显示产品**：选择 2.5D GPU，搭配 DDR3，AXI-64 总线
3. **高端图形产品**：选择 3D GPU，搭配 DDR3/DDR4，AXI-128 总线，需要 MMU

### 9.3 关键设计检查点

- [ ] 内存带宽是否满足峰值需求（建议 2x 余量）
- [ ] 总线仲裁是否支持 QoS
- [ ] 功耗预算是否包含内存访问功耗
- [ ] 驱动软件是否有成熟方案
- [ ] IP 供应商是否提供长期支持

---

## 附录

### A. 术语表

| 术语 | 说明 |
|-----|------|
| **Outstanding** | 总线上未完成的传输数量 |
| **QoS** | Quality of Service，服务质量保证 |
| **MMU** | Memory Management Unit，内存管理单元 |
| **DVFS** | Dynamic Voltage and Frequency Scaling |
| **Fence** | GPU 同步原语，标记命令完成 |
| **TBDR** | Tile-Based Deferred Rendering，基于瓦片的延迟渲染 |

### B. 参考文档

- ARM AMBA AXI Protocol Specification
- Vivante GPU IP Datasheet
- ARM Mali GPU Integration Guide
- Khronos OpenVG Specification

---

*报告版本：v1.1*  
*更新日期：2026-01-08*  
*目标读者：芯片设计工程师、SoC 架构师*
